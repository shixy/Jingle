var Jingle=J={version:"0.41",$:window.Zepto,settings:{appType:"single",transitionType:"slide",transitionTime:250,transitionTimingFunc:"ease-in",toastDuration:3e3,showWelcome:!1,welcomeSlideChange:null,showPageLoading:!1,basePagePath:"html/",basePageSuffix:".html",remotePage:{}},mode:window.innerWidth<800?"phone":"tablet",hasTouch:"ontouchstart"in window,launchCompleted:!1,hasMenuOpen:!1,hasPopupOpen:!1,isWebApp:"http:"==location.protocol,launch:function(a){$.extend(this.settings,a);var b=window.localStorage.getItem("hasShowWelcome");!b&&this.settings.showWelcome&&this.Welcome.show(),this.Element.init(),this.Element.initControlGroup(),this.Router.init(),this.Menu.init(),this.Selected.init()}};J.Element=function(a){var b={icon:"[data-icon]",scroll:'[data-scroll="true"]',toggle:".toggle",range:"[data-rangeinput]",progress:"[data-progress]",count:"[data-count]",checkbox:"[data-checkbox]"},c=function(c){c||a(document).on("articleshow","article",function(){J.Element.scroll(this)});var d=a(c||"body");0!=d.length&&(a.map(e(d,b.icon),g),a.map(e(d,b.toggle),h),a.map(e(d,b.range),i),a.map(e(d,b.progress),j),a.map(e(d,b.count),k),a.map(e(d,b.checkbox),l),d=null)},d=function(){a(document).on("tap","ul.control-group li",function(){var b=a(this);b.hasClass("active")||b.addClass("active").siblings(".active").removeClass("active").parent().trigger("change",[b])})},e=function(a,b){return a.find(b).add(a.filter(b))},f=function(c){a.map(e(a(c),b.scroll),function(a){J.Scroll(a)})},g=function(b){var c=a(b),d=c.children("i.icon"),e=c.data("icon");d.length>0?d.attr("class","icon "+e):c.prepend('<i class="icon '+e+'"></i>')},h=function(b){var c=a(b);if(!(c.find("div.toggle-handle").length>0)){var d=c.attr("name");d&&c.append('<input style="display: none;" name="'+d+'" value="'+c.hasClass("active")+'"/>'),c.append('<div class="toggle-handle"></div>'),c.tap(function(){var b=a(this),c=!b.hasClass("active");b.toggleClass("active").trigger("toggle",[c]),b.find("input").val(c)})}},i=function(b){var c,d=a(b),e=a('input[type="range"]',b),f=d.data("rangeinput"),g=a('<input type="number" name="test" value="'+e.val()+'"/>');c="left"==f?g.prependTo(d):g.appendTo(d);var h=parseInt(e.attr("max"),10),i=parseInt(e.attr("min"),10);e.change(function(){c.val(e.val())}),c.on("input",function(){var a=parseInt(c.val(),10);a=a>h?h:i>a?i:a,e.val(a),c.val(a)})},j=function(b){var c,d=a(b),e=parseFloat(d.data("progress"))+"%",f=d.data("title")||"";c=d.find("div.bar"),0==c.length&&(c=a('<div class="bar"></div>').appendTo(d)),c.width(e).text(f+e),"100%"==e&&c.css("border-radius","10px")},k=function(b){var c=a(b),d=c.find("span.count"),e=parseInt(c.data("count")),f=c.data("orient"),g="left"==f?"left":"";d.length>0?d.text(e).show():d=a('<span class="count '+g+'">'+e+"</span>").appendTo(c),0==e&&d.hide()},l=function(b){var c=a(b),d=c.data("checkbox");c.find("i.icon").length>0||(c.prepend('<i class="icon checkbox-'+d+'"></i>'),c.on("tap",function(){var a="checked"==c.data("checkbox")?"unchecked":"checked";c.data("checkbox",a).find("i.icon").attr("class","icon checkbox-"+a),c.trigger("change")}))};return{init:c,initControlGroup:d,icon:g,toggle:h,progress:j,range:i,badge:k,scroll:f}}(J.$),J.Menu=function(a){var b,c,d,e=function(){b=a("#aside_container"),c=a("#section_container"),d=a('<div id="section_container_mask"></div>').appendTo("#section_container"),d.on("tap",g),b.on("swipeRight","aside",function(){"right"==a(this).data("position")&&g()}),b.on("swipeLeft","aside",function(){"right"!=a(this).data("position")&&g()}),b.on("tap",".aside-close",g)},f=function(b){var d=a(b).addClass("active"),e=d.data("transition"),f=d.data("position")||"left",g=d.data("show-close"),h=d.width(),i="left"==f?h+"px":"-"+h+"px";g&&0==d.find("div.aside-close").length&&d.append('<div class="aside-close icon close"></div>'),J.Element.scroll(d),"overlay"==e?J.anim(d,{translateX:"0%"}):"reveal"==e?J.anim(c,{translateX:i}):(J.anim(d,{translateX:"0%"}),J.anim(c,{translateX:i})),a("#section_container_mask").show(),J.hasMenuOpen=!0},g=function(b,d){var e=a("#aside_container aside.active"),f=e.data("transition"),g=e.data("position")||"left",h="left"==g?"-100%":"100%",i=function(){e.removeClass("active"),J.hasMenuOpen=!1,d&&d.call(this)};"overlay"==f?J.anim(e,{translateX:h},b,i):"reveal"==f?J.anim(c,{translateX:"0"},b,i):(J.anim(e,{translateX:h},b),J.anim(c,{translateX:"0"},b,i)),a("#section_container_mask").hide()};return{init:e,show:f,hide:g}}(J.$),J.Page=function(a){var b=function(a){return 0==a.indexOf("#")?a.substr(1):a},c=function(c,d){var f,g={},h=!1;"object"==a.type(c)&&(g=c.param,f=c.query,c=c.tag);var i=a(c).data("query");if(1==a(c).length){if(i==f)return void d();h=!0}var j=b(c),k=J.settings.remotePage[c];k||(k=J.settings.basePagePath+j+J.settings.basePageSuffix),J.settings.showPageLoading&&J.showMask(),e(k,g,function(b){J.settings.showPageLoading&&J.hideMask(),a(c).remove();var e=a(b);a("#section_container").append(e),h&&e.addClass("active"),e.trigger("pageload").data("query",f),J.Element.init(c),d(),e=null})},d=function(b,c){var d=J.Util.parseHash(window.location.hash).param;e(b,d,function(b){a(c).html(b),J.Element.init(c)})},e=function(b,c,d){return a.ajax({url:b,timeout:2e4,data:c,success:function(a){d&&d(a)}})};return{load:c,loadSection:d,loadContent:e}}(J.$),J.Router=function(a){var b=[],c=function(){a(window).on("popstate",e),a(document).on("click","a",function(b){var c=a(this).data("target"),d=a(this).attr("href");return!d||d.match(/^#/)||c?(b.preventDefault(),!1):void 0}),a(document).on("tap","a[data-target]",f),d()},d=function(){var b=location.hash,c=a("#section_container section").first(),d="#"+c.attr("id");j(d,!0),""!=b&&b!=d?g(b):c.trigger("pageinit").trigger("pageshow").data("init",!0).find("article.active").trigger("articleshow")},e=function(a){if(a.state&&a.state.hash){var c=a.state.hash;b[1]&&c===b[1].hash&&(J.hasMenuOpen&&J.Menu.hide(),J.hasPopupOpen&&J.Popup.close(),h())}},f=function(){var b=a(this),c=b.attr("data-target"),d=b.attr("href");switch(c){case"section":"single"==J.settings.appType&&g(d);break;case"article":k(d,b);break;case"menu":l(d);break;case"back":window.history.go(-1)}},g=function(c){if(J.hasMenuOpen)return void J.Menu.hide(200,function(){g(c)});var d=J.Util.parseHash(c),e=b[0];e.hash!==d.hash&&J.Page.load(d,function(){var b=e.tag==d.tag;b?a(e.tag).trigger("pageshow").find("article.active").trigger("articlehide"):i(e.tag,d.tag),j(c,b)})},h=function(){"single"==J.settings.appType&&i(b.shift().tag,b[0].tag,!0)},i=function(a,b,c){J.Transition.run(a,b,c)},j=function(a,c){var d=J.Util.parseHash(a);c?(b.shift(d),window.history.replaceState(d,"",a)):window.history.pushState(d,"",a),b.unshift(d)},k=function(b,c){var d=a(b);if(!d.hasClass("active")){c.addClass("active").siblings(".active").removeClass("active");var e=d.addClass("active").siblings(".active").removeClass("active");d.trigger("articleshow"),e.trigger("articlehide")}},l=function(a){J.hasMenuOpen?J.Menu.hide():J.Menu.show(a)};return{init:c,goTo:g,showArticle:k,back:h}}(J.$),J.Service=function(a){function b(b,c,d,e){var f=!a.isFunction(c);return{url:b,data:f?c:void 0,success:f?a.isFunction(d)?d:void 0:c,dataType:f?e||d:d}}var c="JINGLE_POST_DATA",d="JINGLE_GET_",e=function(a){"post"==a.type?f(a):g(a)},f=function(b){J.offline?(j(b.url,b.data),b.success("数据已存至本地")):a.ajax(b)},g=function(b){var c=b.url+JSON.stringify(b.data);if(J.offline){var d=h(c);d?b.success(d.data,c,d.cacheTime):b.success(d)}else{var e=b.success;b.success=function(a){i(c,a),e(a,c)},a.ajax(b)}},h=function(a){return JSON.parse(window.localStorage.getItem(d+a))},i=function(a,b){var c={data:b,cacheTime:new Date};window.localStorage.setItem(d+a,JSON.stringify(c))},j=function(a,b){var d=k();d=d||{},d[a]={data:b,createdTime:new Date},window.localStorage.setItem(c,JSON.stringify(d))},k=function(a){var b=JSON.parse(window.localStorage.getItem(c));return b&&a?b[a]:b},l=function(a){if(a){var b=k();delete b[a],window.localStorage.setItem(c,JSON.stringify(b))}else window.localStorage.removeItem(c)},m=function(b,c,d){var e=k(b).data;a.ajax({url:b,contentType:"application/json",data:e,type:"post",success:function(){c(b)},error:function(){d(b)}})},n=function(a,b){var c=k();for(var d in c)m(d,a,b);l()},o=function(){return e(b.apply(null,arguments))},p=function(){var a=b.apply(null,arguments);return a.type="POST",e(a)},q=function(){var a=b.apply(null,arguments);return a.dataType="json",e(a)},r=function(){for(var a=window.localStorage,b=[],e=0;e<a.length;e++){var f=a.key(e);0==f.indexOf(d)&&b.push(f)}for(var e=0;e<b.length;e++)a.removeItem(b[e]);a.removeItem(c)};return{ajax:e,get:o,post:p,getJSON:q,getUnPostData:k,removeUnPostData:l,syncPostData:m,syncAllPostData:n,getCacheData:h,saveCacheData:i,clear:r}}(J.$),J.Template=function(a){var b=function(b,c,d){var e='<div class="back-mask"><div class="icon '+d+'"></div><div>'+c+"</div></div>";a(b).html(e)},c=function(a){b(a,"没有找到相关数据","drawer")},d=function(a){b(a,"加载中...","cloud-download")},e=function(b,d,e,f){var g=a(b),f=f||"replace";if("array"==a.type(e)&&0==e.length)c(g);else{var h=a(template(d,e));"replace"==f?g.html(h):g.append(h),J.Element.init(h)}};return{render:e,background:b,loading:d,no_result:c}}(J.$),J.Toast=function(a){var b,c,d="toast",e={toast:'<a href="#">{value}</a>',success:'<a href="#"><i class="icon checkmark-circle"></i>{value}</a>',error:'<a href="#"><i class="icon cancel-circle"></i>{value}</a></div>',info:'<a href="#"><i class="icon info-2"></i>{value}</a>'},f=function(){a("body").append('<div id="jingle_toast"></div>'),b=a("#jingle_toast"),i()},g=function(){J.anim(b,"scaleOut",function(){b.hide(),b.empty()})},h=function(a,f,h){c&&clearTimeout(c);var i=a.split(/\s/);d=i[0],b.attr("class",a).html(e[d].replace("{value}",f)).show(),J.anim(b,"scaleIn"),0!==h&&(c=setTimeout(g,h||J.settings.toastDuration))},i=function(){b.on("tap",'[data-target="close"]',function(){g()})};return f(),{show:h,hide:g}}(J.$),J.Transition=function(a){var b,c,d,e,f={slide:[["slideLeftOut","slideLeftIn"],["slideRightOut","slideRightIn"]],cover:[["","slideLeftIn"],["slideRightOut",""]],slideUp:[["","slideUpIn"],["slideDownOut",""]],slideDown:[["","slideDownIn"],["slideUpOut",""]],popup:[["","scaleIn"],["scaleOut",""]]},g=function(){c.trigger("beforepagehide",[b]),d.trigger("beforepageshow",[b]);var a=e[0]||"empty",f=e[1]||"empty";c.bind("webkitAnimationEnd.jingle",h).addClass("anim "+a),d.addClass("anim animating "+f)},h=function(){c.off("webkitAnimationEnd.jingle"),d.off("webkitAnimationEnd.jingle"),c.attr("class",""),d.attr("class","active"),!d.data("init")&&d.trigger("pageinit").data("init",!0),!c.data("init")&&c.trigger("pageinit").data("init",!0),c.trigger("pagehide",[b]),d.trigger("pageshow",[b]),c.find("article.active").trigger("articlehide"),d.find("article.active").trigger("articleshow"),c=d=null},i=function(h,i,j){a(":focus").trigger("blur"),b=j,c=a(h),d=a(i);var k=b?c.attr("data-transition"):d.attr("data-transition");k=k||J.settings.transitionType,e=b?f[k][1]:f[k][0],g()},j=function(a,b,c,d,e){return f[a]?void console.error("该转场动画已经存在，请检查你自定义的动画名称(名称不能重复)"):void(f[a]=[[b,c],[d,e]])};return{run:i,add:j}}(J.$),J.Util=function(){var a=function(a){var b,c,d={},e=a.split("?");if(b=e[0],e.length>1){var f,g;c=e[1],f=c.split("&");for(var h=0;h<f.length;h++)f[h]&&(g=f[h].split("="),d[g[0]]=g[1])}return{hash:a,tag:b,query:c,param:d}},b=function(a,b){var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(b)&&(b=b.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var d in c)new RegExp("("+d+")").test(b)&&(b=b.replace(RegExp.$1,1==RegExp.$1.length?c[d]:("00"+c[d]).substr((""+c[d]).length)));return b};return{parseHash:a,formatDate:b}}(J.$),J.Welcome=function(a){var b=function(){a.ajax({url:J.settings.basePagePath+"welcome.html",timeout:5e3,async:!1,success:function(b){a("body").append(b),new J.Slider({selector:"#jingle_welcome",onAfterSlide:J.settings.welcomeSlideChange})}})},c=function(){J.anim("#jingle_welcome","slideLeftOut",function(){a(this).remove(),window.localStorage.setItem("hasShowWelcome",!0)})};return{show:b,hide:c}}(J.$),function(a){J.anim=function(b,c){for(var d,e,f,g=arguments.length,h=2;g>h;h++){var i=arguments[h],j=a.type(i);"number"==j?d=i:"string"==j?e=i:"function"==j?f=i:null}a(b).animate(c,d||J.settings.transitionTime,e||J.settings.transitionTimingFunc,f)},J.showMask=function(a){J.Popup.loading(a)},J.hideMask=function(){J.Popup.close(!0)},J.showToast=function(a,b,c){b=b||"toast",J.Toast.show(b,a,c)},J.hideToast=function(){J.Toast.hide()},J.alert=function(a,b){J.Popup.alert(a,b)},J.confirm=function(a,b,c,d){J.Popup.confirm(a,b,c,d)},J.popup=function(a){J.Popup.show(a)},J.closePopup=function(){J.Popup.close()},J.popover=function(a,b,c,d){J.Popup.popover(a,b,c,d)},J.tmpl=function(a,b,c,d){J.Template.render(a,b,c,d)}}(J.$),J.Popup=function(a){var b,c,d,e,f={top:{top:0,left:0,right:0},"top-second":{top:"44px",left:0,right:0},center:{top:"50%",left:"5%",right:"5%","border-radius":"3px"},bottom:{bottom:0,left:0,right:0},"bottom-second":{bottom:"51px",left:0,right:0}},g={top:["slideDownIn","slideUpOut"],bottom:["slideUpIn","slideDownOut"],defaultAnim:["bounceIn","bounceOut"]},h={alert:'<div class="popup-title">{title}</div><div class="popup-content">{content}</div><div id="popup_btn_container"><a data-target="closePopup" data-icon="checkmark">{ok}</a></div>',confirm:'<div class="popup-title">{title}</div><div class="popup-content">{content}</div><div id="popup_btn_container"><a class="cancel" data-icon="close">{cancel}</a><a data-icon="checkmark">{ok}</a></div>',loading:'<i class="icon spinner"></i><p>{title}</p>'},i=function(){a("body").append('<div id="jingle_popup"></div><div id="jingle_popup_mask"></div>'),c=a("#jingle_popup_mask"),b=a("#jingle_popup"),l()},j=function(h){var i={height:void 0,width:void 0,opacity:.3,url:null,tplId:null,tplData:null,html:"",pos:"center",clickMask2Close:!0,showCloseBtn:!0,arrowDirection:void 0,animation:!0,timingFunc:"linear",duration:200,onShow:void 0};a.extend(i,h),e=i.clickMask2Close,c.css("opacity",i.opacity),b.attr({style:"","class":""}),i.width&&b.width(i.width),i.height&&b.height(i.height);var j=a.type(i.pos);if("object"==j)b.css(i.pos),d=g.defaultAnim;else{if("string"!=j)return void console.error("错误的参数！");if(f[i.pos]){b.css(f[i.pos]);var k=i.pos.indexOf("top")>-1?"top":i.pos.indexOf("bottom")>-1?"bottom":"defaultAnim";d=g[k]}else b.addClass(i.pos),d=g.defaultAnim}c.show();var l;if(i.html?l=i.html:i.url?l=J.Page.loadContent(i.url):i.tplId&&(l=template(i.tplId,i.tplData)),i.showCloseBtn&&(l+='<div id="tag_close_popup" data-target="closePopup" class="icon cancel-circle"></div>'),i.arrowDirection&&(b.addClass("arrow "+i.arrowDirection),b.css("padding","8px"),("top"==i.arrowDirection||"bottom"==i.arrowDirection)&&(d=g[i.arrowDirection])),b.html(l).show(),J.Element.init(b),i.onShow&&i.onShow.call(b),"center"==i.pos){var m=b.height();b.css("margin-top","-"+m/2+"px")}i.animation&&J.anim(b,d[0],i.duration,i.timingFunc),J.hasPopupOpen=!0},k=function(a){c.hide(),d&&!a?J.anim(b,d[1],200,function(){b.hide().empty(),J.hasPopupOpen=!1}):(b.hide().empty(),J.hasPopupOpen=!1)},l=function(){c.on("tap",function(){e&&k()}),b.on("tap",'[data-target="closePopup"]',function(){k()})},m=function(a,b,c){var d=h.alert.replace("{title}",a).replace("{content}",b).replace("{ok}",c||"确定");j({html:d,pos:"center",clickMask2Close:!1,showCloseBtn:!1})},n=function(b,c,d,e){var f=h.confirm.replace("{title}",b).replace("{content}",c).replace("{cancel}","取消").replace("{ok}","确定");j({html:f,pos:"center",clickMask2Close:!1,showCloseBtn:!1}),a('#popup_btn_container [data-icon="checkmark"]').tap(function(){k(),d.call(this)}),a('#popup_btn_container [data-icon="close"]').tap(function(){k(),e.call(this)})},o=function(a,b,c,d){j({html:a,pos:b,showCloseBtn:!1,arrowDirection:c,onShow:d})},p=function(a){var b=h.loading.replace("{title}",a||"加载中...");j({html:b,pos:"loading",opacity:.1,animation:!0,clickMask2Close:!1})},q=function(b){var c='<div class="actionsheet">';a.each(b,function(a,b){c+='<button style="background-color: '+b.color+' !important;">'+b.text+"</button>"}),c+='<button class="alizarin">取消</button>',c+="</div>",j({html:c,pos:"bottom",showCloseBtn:!1,onShow:function(){a(this).find("button").each(function(c,d){a(d).on("tap",function(){b[c]&&b[c].handler&&b[c].handler.call(d),k()})})}})};return i(),{show:j,close:k,alert:m,confirm:n,popover:o,loading:p,actionsheet:q}}(J.$),J.Selected=function(a){var b,c,d="[data-selected]",e=function(){a(document).on("touchstart.selected",d,function(){c=a(this).data("selected"),b=a(this).addClass(c)}),a(document).on("touchmove.selected touchend.selected touchcancel.selected",function(){b&&(b.removeClass(c),b=null)})};return{init:e}}(J.$),J.Cache=function(a){var b="_J_P_",c="_J_",d=function(a,b){var d={data:b,cacheTime:new Date};window.localStorage.setItem(c+a,JSON.stringify(d))},e=function(a){return JSON.parse(window.localStorage.getItem(c+a))},f=function(a,c){var d=g();d=d||{},d[a]={data:c,createdTime:new Date},window.localStorage.setItem(b,JSON.stringify(d))},g=function(a){var c=JSON.parse(window.localStorage.getItem(b));return c&&a?c[a]:c},h=function(a){if(a){var c=g();delete c[a],window.localStorage.setItem(b,JSON.stringify(c))}else window.localStorage.removeItem(b)},i=function(b,c,d){function e(b){var e=g(b).data;a.ajax({url:b,contentType:"application/json",data:e,type:"post",success:function(){i++,h(b),i==f&&c(b)},error:function(){d(b)}})}var f,i=0;if("string"==a.type(b))f=1,e(b);else{var j=g();if(!j)return;f=j.length;for(var b in j)e(b)}},j=function(){var a=window.localStorage;for(var d in a)0==d.indexOf(c)&&a.removeItem(d);a.removeItem(b)};return{get:e,save:d,getPost:g,savePost:f,removePost:h,syncPost:i,clear:j}}(J.$),function(a){var b=function(b,c){var d,e,f,g,h,i,j={months:["01月","02月","03月","04月","05月","06月","07月","08月","09月","10月","11月","12月"],days:["日","一","二","三","四","五","六"],swipeable:!0,date:new Date,onRenderDay:void 0,onSelect:void 0},k=this,l=a(b),m=function(){k.settings=a.extend({},j,c),h=k.settings.date.getFullYear(),i=k.settings.date.getMonth(),g=new Date(h,i,k.settings.date.getDate()),p(),u()},n=function(a){return new Date(a.getFullYear(),a.getMonth(),1).getDay()},o=function(a){return new Date(a.getFullYear(),a.getMonth()+1,0).getDate()},p=function(){var a="";a+='<div class="jingle-calendar">',a+=q(h,i),a+=r(),a+='<div class="jingle-calendar-body">',a+=s(g),a+="</div></div>",l.html(a);var b=l.find("span");d=b.eq(0),e=b.eq(1),f=l.find(".jingle-calendar-body")},q=function(a,b){var c='<div class="jingle-calendar-nav">';return c+='<div> <i class="icon previous" data-year='+a+"></i><span>"+a+'</span><i class="icon next" data-year='+a+"></i></div>",c+='<div ><i class="icon previous" data-month='+b+"></i> <span>"+k.settings.months[b]+'</span><i class="icon next" data-month='+b+"></i></div>",c+="</div>"},r=function(){for(var a="<table><thead><tr>",b=0;7>b;b++)a+="<th>"+k.settings.days[b]+"</th>";return a+="</tr></thead></table>"},s=function(a){var b,c=n(a),d=o(a),e=Math.ceil((c+d)/7),f="";h=a.getFullYear(),i=a.getMonth(),b=new Date(h,i,1-c),f+="<table><tbody>";for(var g=0;e>g;g++){f+="<tr>";for(var j=0;7>j;j++)f+=t(b,i),b.setDate(b.getDate()+1);f+="</tr>"}return f+="</tbody></table>"},t=function(a,b){var c=a.getMonth()!==b,d=k.format(a),e=k.format(k.settings.date)==d?"active":"",f=a.getDate();return k.settings.onRenderDay&&(f=k.settings.onRenderDay.call(null,f,d)),c?"<td>&nbsp;</td>":'<td data-selected="selected" class="'+e+'" data-date= '+d+">"+f+"</td>"},u=function(){var b,c;l.on("tap",function(d){if(b=a(d.target),b.is("[data-year].next")?(g.setFullYear(g.getFullYear()+1),k.refresh(g)):b.is("[data-year].previous")?(g.setFullYear(g.getFullYear()-1),k.refresh(g)):b.is("[data-month].next")?(g.setMonth(g.getMonth()+1),k.refresh(g)):b.is("[data-month].previous")&&(g.setMonth(g.getMonth()-1),k.refresh(g)),c=b.closest("td"),!b.is("td")&&c.length>0&&(b=c),b.is("td")){var e=b.data("date");e&&k.settings.onSelect&&k.settings.onSelect.call(k,e)}}),l.on("swipeLeft",function(){g.setMonth(g.getMonth()+1),k.refresh(g)}),l.on("swipeRight",function(){g.setMonth(g.getMonth()-1),k.refresh(g)})};this.refresh=function(a){var b=new Date(h,i,1),c=new Date(a.getFullYear(),a.getMonth(),1),g=void 0;if(b.getTime()!=c.getTime()){g=c>b?"slideLeftRound":"slideRightRound",d.text(a.getFullYear()),e.text(this.settings.months[a.getMonth()]);var j=s(a);J.anim(f,g,function(){f.html(j)})}},m()};b.prototype.parse=function(a){var b=/^(\d{4})(?:\-|\/)(\d{1,2})(?:\-|\/)(\d{1,2})$/;return b.test(a)?new Date(parseInt(RegExp.$1,10),parseInt(RegExp.$2,10)-1,parseInt(RegExp.$3,10)):null},b.prototype.format=function(a){var b=a.getFullYear(),c=a.getMonth()+1,d=a.getDate();return c=10>c?"0"+c:c,d=10>d?"0"+d:d,b+"-"+c+"-"+d},J.Calendar=b}(J.$),function(a){var b={},c=1;J.Scroll=function(d,e){var f,g,h=a(d),i={hScroll:!1,bounce:!1,lockDirection:!0,useTransform:!0,useTransition:!1,checkDOMChanges:!1,onBeforeScrollStart:function(a){for(var b=a.target;1!=b.nodeType;)b=b.parentNode;"SELECT"!=b.tagName&&"INPUT"!=b.tagName&&"TEXTAREA"!=b.tagName&&a.preventDefault()}};return g=h.data("_jscroll_"),g&&b[g]?(f=b[g],a.extend(f.scroller.options,e),f.scroller.refresh(),f):(g="_jscroll_"+c++,h.data("_jscroll_",g),a.extend(i,e),scroller=new iScroll(h[0],i),b[g]={scroller:scroller,destroy:function(){scroller.destroy(),delete b[g]}})}}(J.$),function(a){function b(b,c){var d,e,f,g,h,i,j,k,l=function(){},m=function(){return!0},n=!1,o=0,p=200;interval=0;var q=this;a.isPlainObject(b)?(d=a(b.selector),c=b.showDots,m=b.onBeforeSlide||m,l=b.onAfterSlide||l,k=b.autoPlay,interval=b.interval||3e3):d=a(b);var r=function(){f=d.children().first(),g=f.children(),h=g.length,i=d.offset().width,f.css("width",h*i),g.css({width:i,"float":"left"}).show(),void 0==c&&(c=!0),c&&t(),u(0,0),l(0),k&&s()},s=function(){setTimeout(function(){o==h-1?u(0):q.next(),s()},interval)},t=function(){if(e=d.find(".dots"),e.length>0)e.show();else{for(var b=30*h+20+2,c='<div class="dots"><ul>',f=0;h>f;f++)c+='<li index="'+f+'"',0==f&&(c+='class="active"'),c+='><a href="#"></a></li>';c+="</ul></div>",d.append(c),e=d.find(".dots"),e.children().css("width",b+"px"),e.find("li").on("tap",function(){var b=a(this).attr("index");u(parseInt(b),p)})}},u=function(b,c){c=c||p,f.css({"-webkit-transition-duration":c+"ms","-webkit-transform":"translate3D("+-(b*i)+"px,0,0)"}),o!=b&&(o=b,e&&a(e.find("li").get(o)).addClass("active").siblings().removeClass("active"),l(o))},v=function(){f.on("touchstart",w,!1),f.on("touchmove",x,!1),f.on("touchend",y,!1)},w=function(a){var b=a.touches[0];start={pageX:b.pageX,pageY:b.pageY,time:Number(new Date)},isScrolling=void 0,j=0,f[0].style.webkitTransitionDuration=0,n=!0},x=function(a){if(n){var b=a.touches[0];if(j=b.pageX-start.pageX,"undefined"==typeof isScrolling&&(isScrolling=Math.abs(j)<Math.abs(b.pageY-start.pageY)),!isScrolling){a.preventDefault();var c=!o&&j>0||o==h-1&&0>j;if(c)return;var d=j-o*i;f[0].style.webkitTransform="translate3D("+d+"px,0,0)"}}},y=function(){var a=Number(new Date)-start.time<250&&Math.abs(j)>20||Math.abs(j)>i/3,b=!o&&j>0||o==h-1&&0>j;isScrolling||(m(o,j)?u(o+(a&&!b?0>j?1:-1:0),p):u(o)),n=!1};r(),v(),this.refresh=function(){f.attr("style",""),r()},this.prev=function(){o&&u(o-1,p)},this.next=function(){h-1>o&&u(o+1,p)},this.index=function(a){u(a)}}J.Slider=b}(J.$),function(a){function b(b,c,d){var e,f,g,h,i,j,k,l={selector:void 0,type:"pullDown",minPullHeight:10,pullText:"下拉刷新...",releaseText:"松开立即刷新...",refreshText:"刷新中...",refreshTip:!1,onPullIcon:"arrow-down-2",onReleaseIcon:"icon-reverse",onRefreshIcon:"spinner",callback:void 0};"object"==typeof b?a.extend(l,b):(l.selector=b,l.type=c,l.callback=d,"pullUp"===c&&a.extend(l,{pullText:"上拉加载更多...",releaseText:"松开开立即加载...",refreshText:"加载中...",onPullIcon:"arrow-up-3"})),k="pullDown"===l.type?!0:!1;var m=function(b){f=a(b.selector).children()[0];var c='<div class="refresh-container"><span class="refresh-icon icon '+b.onPullIcon+'"></span><span class="refresh-label">'+b.pullText+"</span>"+(b.refreshTip?'<div class="refresh-tip">'+b.refreshTip+"</div>":"")+"</div>";g=k?a(c).prependTo(f):a(c).appendTo(f),j=g.height(),h=g.find(".refresh-icon"),i=g.find(".refresh-label")},n=function(a){return J.Scroll(a.selector,{topOffset:k?j:0,bounce:!0,onScrollMove:function(){this.y>a.minPullHeight&&k&&!h.hasClass(a.onReleaseIcon)?(h.addClass(a.onReleaseIcon),i.html(a.releaseText),this.minScrollY=0):this.y<a.minPullHeight&&k&&h.hasClass(a.onReleaseIcon)?(h.removeClass(a.onReleaseIcon),i.html(a.pullText),this.minScrollY=-j):this.y<this.maxScrollY-a.minPullHeight&&!k&&!h.hasClass(a.onReleaseIcon)?(h.addClass(a.onReleaseIcon),i.html(a.releaseText),this.maxScrollY=this.maxScrollY):this.y>this.maxScrollY+a.minPullHeight&&!k&&h.hasClass(a.onReleaseIcon)&&(h.removeClass(a.onReleaseIcon),i.html(a.pullText),this.maxScrollY=j)},onScrollEnd:function(){if(h.hasClass(a.onReleaseIcon)){h.removeClass(a.onReleaseIcon).removeClass(a.onPullIcon).addClass(a.onRefreshIcon),i.html(a.refreshText);var b=this;setTimeout(function(){a.callback.call(b)},1)}},onRefresh:function(){h.removeClass(a.onRefreshIcon).addClass(a.onPullIcon),i.html(a.pullText)}})};return m(l),e=n(l)}var c={},d=1;J.Refresh=function(e,f,g){var h,i;if(h=a(e.selector?e.selector:e),i=h.data("_jrefresh_"),i&&c[i])return c[i];i="_jrefresh_"+d++,h.data("_jrefresh_",i);var j=new b(e,f,g);return c[i]={scroller:j.scroller,destroy:function(){delete c[i],j.scroller.destroy(),a(".refresh-container",e).remove()}}}}(J.$);